{% extends 'base.html' %}
{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/buyback.css' %}">
    <title>Add Programs - Deep Space Industry</title>
{% endblock %}

{% block title %}
    Programs
{% endblock %}

{% block navbar_menu %}
<ul class="nav navbar-nav sub-nav">
    <li class="nav-item sub-item">
        <a href="/manager/login/" class="btn btn-primary">Setup Manager</a>
    </li>
    <li class="nav-item sub-item">
        <a href="/locations/" class="btn btn-primary">Locations</a>
    </li>
</ul>
{% endblock %}

{% block content %}
<div class="my-3 d-flex justify-content-center">
    <div class="card col-8">
        <div class="card-header">
            Add Program
        </div>
        <div class="card-body">
            <form method="post">
                {% csrf_token %}
                <div class="from-group">
                    <label for="program_name">Program Name</label>
                    <input class="form-control" type="text" name="program_name" id="program_name" required {% if program %} value="{{program.name}}" {% endif %} >
                </div>
                <div class="from-group">
                    <label for="program_location">Location</label>
                    <select name="program_location" id="program_location" class="form-select">
                        <option value="0" {% if not program %} selected {% endif %}>Anywhere</option>
                        {% for loc in locations %}
                        <option value="{{loc.station_id}}" {% if program.location == loc %} selected {% endif %}>{{loc.station_name}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="from-group">
                    <label for="program_tax">Program Tax (%)</label>
                    <input type="number" class="form-control" name="program_tax" id="program_tax" min="0" max="100" placeholder="0 - 100" required {% if program %} value="{{program.tax}}" {% endif %}>
                </div>
                <div class="from-group">
                    <label for="program_item_price">Base Item Price</label>
                    <select class="form-select" name="program_item_price" id="program_item_price" required>
                        {% if not program %}
                        <option selected disabled>Select one option</option>
                        {% endif %}
                        {% for price in base_prices %}
                            <option value="{{price.id}}">{{price.name}}</option>
                        {% endfor %}
                    </select>

                </div>
                <div class="from-group">
                    <label for="program_services">Services</label>
                    <select name="program_services" id="program_services" class="form-select" multiple size="3" aria-label="size 3 multiple select">
                        {% for ser in services %}
                            <option value="{{ser.id}}">{{ser.name}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="from-group" id="tax" style="display: none;">
                    <label for="freight_tax">Freight Tax (ISK/m<sup>3</sup>)</label>
                    <input class="form-control" type="number" name="freight_tax" id="freight_tax" min="0" placeholder="0 - âˆž">
                </div>
                <div class="d-grid gap-2 my-2">
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
                
            </form>
        </div>
    </div>
</div>
<script src="{% static 'js/program_add.js' %}"></script>
{% endblock %}